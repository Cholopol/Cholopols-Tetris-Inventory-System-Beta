# **Cholopol's Tetris Inventory System**

[![GitHub license](https://img.shields.io/github/license/cholopol/Cholopols-Tetris-Inventory-System-Beta)](LICENSE) [![Github Stars](https://img.shields.io/github/stars/cholopol/Cholopols-Tetris-Inventory-System-Beta?style=social)](STARS)

 ![cover](Images/cover.png)
  <center>åŸºäºUnityå¼€å‘çš„å®ç”¨çš„Tetrisä¿„ç½—æ–¯æ–¹å—å¼ç‰©å“ç½‘æ ¼åº“å­˜ç³»ç»Ÿ</center>

## ğŸ“– ç›®å½•
- [ğŸŒŸ é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
  - [æ ¸å¿ƒæœºåˆ¶](#æ ¸å¿ƒæœºåˆ¶)
  - [äº¤äº’ç³»ç»Ÿ](#äº¤äº’ç³»ç»Ÿ)
  - [äº¤äº’åŠŸèƒ½æµç¨‹](#äº¤äº’åŠŸèƒ½æµç¨‹)
  - [ç½‘æ ¼è®¾è®¡](#ç½‘æ ¼è®¾è®¡)
  - [æ•°æ®ç®¡ç†](#æ•°æ®ç®¡ç†)
  - [æ•°æ®-é€»è¾‘åˆ†ç¦»](#æ•°æ®-é€»è¾‘åˆ†ç¦»)
  - [æ‰©å±•æ€§](#æ‰©å±•æ€§)
- [ğŸ§© é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸš€ ç¯å¢ƒè¦æ±‚](#-ç¯å¢ƒè¦æ±‚)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ğŸ“œ è®¸å¯è¯](#-è®¸å¯è¯)
- [ğŸ“¬ è”ç³»æ–¹å¼](#-è”ç³»æ–¹å¼)

---

## ğŸŒŸ é¡¹ç›®æ¦‚è¿°
> Cholopol's Tetris Inventory Systemæ˜¯åŸºäºUnityå¼•æ“å¼€å‘çš„TetrisèƒŒåŒ…ç³»ç»Ÿï¼Œå·§å¦™èåˆç»å…¸ä¿„ç½—æ–¯æ–¹å—æœºåˆ¶ä¸æ¸¸æˆé“å…·ç®¡ç†éœ€æ±‚ã€‚è¯¥ç³»ç»Ÿä¸“ä¸ºéœ€è¦åŠ¨æ€ç©ºé—´è§„åˆ’ç­–ç•¥çš„æ¸¸æˆåœºæ™¯è®¾è®¡ï¼Œé€‚ç”¨äºRPGè£…å¤‡ç®¡ç†ã€ç”Ÿå­˜æ¸¸æˆèµ„æºå­˜å‚¨ã€ç­–ç•¥æ¸¸æˆæˆ˜åˆ©å“åˆ†é…ç­‰å¤šæ ·åŒ–æ¸¸æˆç±»å‹ã€‚
![TIS](Images/TIS.png)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **æ ¸å¿ƒæœºåˆ¶**

  - ä¿„ç½—æ–¯æ–¹å—å¼ç‰©å“ç®¡ç†
  - ä»»æ„å½¢çŠ¶æ”¯æŒ
    - æ”¯æŒDominoï¼ˆ2æ ¼ï¼‰ã€Trominoï¼ˆ3æ ¼ï¼‰ã€Tetrominoï¼ˆ4æ ¼ï¼‰ã€Pentominoï¼ˆ5æ ¼ï¼‰ç­‰ç»å…¸ä¿„ç½—æ–¯æ–¹å—å½¢çŠ¶ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•è‡ªå®šä¹‰ä»»ä½•å½¢çŠ¶ï¼
  - åŠ¨æ€æ—‹è½¬ç³»ç»Ÿ
    - æ”¯æŒ0Â°/90Â°/180Â°/270Â°æ—‹è½¬ï¼Œè‡ªåŠ¨è®¡ç®—æ—‹è½¬åç§»é‡
  - ç¢°æ’æ£€æµ‹
    - è¾¹ç•Œæ£€æŸ¥ (`BoundryCheck`)ï¼šé˜²æ­¢ç‰©å“è¶…å‡ºç½‘æ ¼èŒƒå›´
    - é‡å æ£€æµ‹ (`OverlapCheck`)ï¼šéªŒè¯ç›®æ ‡ä½ç½®æ˜¯å¦å·²è¢«å ç”¨
  - è‡ªå®šä¹‰ç½‘æ ¼å°ºå¯¸

- **äº¤äº’ç³»ç»Ÿ**

  - å¯è§†åŒ–æ‹–æ‹½
  - ç‰©å“å½±å­ (TetrisItemGhost)  
    - å®æ—¶æ˜¾ç¤ºæ‹–æ‹½é¢„è§ˆï¼Œä¿ç•™æ—‹è½¬çŠ¶æ€ä¸å°ºå¯¸ä¿¡æ¯
  - è·¨å®¹å™¨äº¤äº’
    - æ”¯æŒç‰©å“åœ¨ç½‘æ ¼èƒŒåŒ…ä¸è£…å¤‡æ§½ä½ä¹‹é—´è‡ªç”±è½¬ç§»
  - æ§½ä½ç±»å‹çº¦æŸ
    - å®šä¹‰æ­¦å™¨/æ¶ˆè€—å“ç­‰9ç§æ§½ä½ç±»å‹ (`InventorySlotType`)ï¼Œå®ç°ç±»å‹åŒ¹é…éªŒè¯
  - å®æ—¶é«˜äº®åé¦ˆ
    - ä½¿ç”¨å¯¹è±¡æ±  (`TilePool`) åŠ¨æ€ç”Ÿæˆç»¿è‰²ï¼ˆå¯æ”¾ç½®ï¼‰/çº¢è‰²ï¼ˆå†²çªï¼‰æç¤ºç“¦ç‰‡

- â€‹**äº¤äº’åŠŸèƒ½æµç¨‹** ![sequenceDiagram](Images/sequenceDiagram.png)

- **ç½‘æ ¼è®¾è®¡**
  (0,0) ä¸ºåŸç‚¹ï¼ŒXè½´å‘å³ï¼ŒYè½´å‘ä¸‹ï¼Œè¯·ç¡®ä¿æ‰€æœ‰TetrisItemçš„åæ ‡å‡ä¸ºéè´Ÿæ•´æ•°

```plaintext
Y
 â–¼
 â”‚
0â”œâ”€â”€â”€(0,0)â”€â”€â”€â”€(1,0)â”€â”€â”€â”€(2,0)
 â”‚     â”‚        â”‚        â”‚
1â”œâ”€â”€â”€(0,1)â”€â”€â”€â”€(1,1)â”€â”€â”€â”€(2,1)
 â”‚     â”‚        â”‚        â”‚
2â”œâ”€â”€â”€(0,2)â”€â”€â”€â”€(1,2)â”€â”€â”€â”€(2,2)
 â”‚     â”‚        â”‚        â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ X
       0        1        2
```

- **æ•°æ®ç®¡ç†**

  - å¯é…ç½®åŒ–è®¾è®¡
    - åŸºäºScriptableObjectçš„ç‰©å“å±æ€§å®šä¹‰
      `ItemDataList_SO`ï¼šé›†ä¸­ç®¡ç†ç‰©å“å±æ€§ï¼ˆåç§°/å›¾æ ‡/å°ºå¯¸ç­‰ï¼‰
      `TetrisItemPointSet_SO`ï¼šå­˜å‚¨ä¿„ç½—æ–¯æ–¹å—å½¢çŠ¶åæ ‡æ•°æ®

- **æ•°æ®-é€»è¾‘åˆ†ç¦»**  
  - ç‰©å“å±æ€§ä¸å½¢çŠ¶å®šä¹‰å®Œå…¨è§£è€¦ï¼Œä¾¿äºæ‰©å±•æ–°ç‰©å“ç±»å‹

- **æ‰©å±•æ€§**

  - æ¨¡å—åŒ–æ¶æ„
    - ä¸­ä»‹è€…æ¨¡å¼
      `TetrisItemMediator` ç»Ÿä¸€åè°ƒç‰©å“ä¸å½±å­çš„çŠ¶æ€åŒæ­¥
    - å•ä¾‹ç®¡ç†å™¨ 
      `InventoryManager` å…¨å±€æ§åˆ¶ç‰©å“ç”Ÿæˆ/æ—‹è½¬/é«˜äº®é€»è¾‘
    - UIåŠ¨æ€é€‚é…
      `SlotLayoutController` è‡ªåŠ¨è°ƒæ•´æ§½ä½UIå¸ƒå±€

---
## ğŸ§© é¡¹ç›®ç»“æ„

```bash
Assets/
â””â”€â”€ Scripts/
    â”œâ”€â”€ Inventory/
    â”‚   â”œâ”€â”€ Core/
    â”‚   â”‚   â”œâ”€â”€ TetrisItem.cs          // èƒŒåŒ…ç‰©å“å®ä½“
    â”‚   â”‚   â”œâ”€â”€ TetrisItemGhost.cs     // èƒŒåŒ…ç‰©å“å½±å­
    â”‚   â”‚   â”œâ”€â”€ TetrisItemMediator.cs  // èƒŒåŒ…ç‰©å“ä¸­ä»‹è€…
    â”‚   â”‚   â”œâ”€â”€ TetrisItemGrid.cs      // ç½‘æ ¼é€»è¾‘
    â”‚   â”‚   â””â”€â”€ InventorySlot.cs       // è£…å¤‡æ§½é€»è¾‘
    â”‚   â”œâ”€â”€ Visuals/
    â”‚   â”‚   â”œâ”€â”€ InventoryHighlight.cs  // é«˜äº®åé¦ˆç³»ç»Ÿ
    â”‚   â”‚   â””â”€â”€ TilePool.cs            // é«˜äº®ç“¦ç‰‡å¯¹è±¡æ± 
    â”‚   â”œâ”€â”€ Data/
    â”‚   â”‚   â”œâ”€â”€ ItemDataList_SO.cs     // ç‰©å“æ•°æ®é…ç½®
    â”‚   â”‚   â””â”€â”€ TetrisItemPointSet_SO.cs // å½¢çŠ¶æ•°æ®é…ç½®
    â”‚   â””â”€â”€ Utilities/
    â”‚       â”œâ”€â”€ RotationHelper.cs      // æ—‹è½¬è®¡ç®—å·¥å…·
    â”‚       â””â”€â”€ Singleton.cs           // å•ä¾‹åŸºç±»
    â””â”€â”€ ItemEditor/                    // Tetrisç‰©å“ç¼–è¾‘å™¨
            â””â”€â”€ TetrisItemEditor.cs     // ç¼–è¾‘å™¨è„šæœ¬
```

---

## ğŸš€ ç¯å¢ƒè¦æ±‚

- Unity Editor 2022.3.52f1 LTSåŠä»¥ä¸Š
- å¤šè¯­ç§æ”¯æŒï¼šé€šè¿‡Unity Package Managerå®‰è£…`com.unity.localization`æ’ä»¶


---
## ğŸ¤ è´¡çŒ®æŒ‡å—
> æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼å‚ä¸ï¼š
- æäº¤BugæŠ¥å‘Šæˆ–åŠŸèƒ½è¯·æ±‚
- å®Œå–„æ–‡æ¡£æˆ–ç¿»è¯‘
    - ç®€ä½“ä¸­æ–‡
    - ç¹é«”ä¸­æ–‡
    - English
    - FranÃ§ais
    - æ—¥æœ¬èª
    - í•œêµ­ì–´
    - Ğ ÑƒÑÑĞºĞ¸Ğ¹
    - EspaÃ±ol

---
## ğŸ“œ è®¸å¯è¯
æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ã€‚è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚

---
## ğŸ“¬ è”ç³»æ–¹å¼
å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ã€å»ºè®®æˆ–æƒ³æ³•ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ï¼š
- ğŸ“§ ç”µå­é‚®ç®±ï¼šcholopol@163.com
- ğŸ’¬ ç¤¾åŒºè®¨è®ºï¼šæ•¬è¯·æœŸå¾…
- ğŸŒ è§†é¢‘ä»‹ç»ï¼šæ•¬è¯·æœŸå¾…
- â˜• èµåŠ©æˆ‘ä¸€æ¯å’–å•¡ï¼š [Alipay or WeChat](donate.md)

![Intro](Images/Intro.gif)
